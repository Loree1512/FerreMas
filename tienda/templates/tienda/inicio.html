<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FerreMas - Herramientas para profesionales</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'tienda/styles.css' %}">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    Ferre<span>Mas</span>
                </div>
                
                <div class="header-tools">
                    <div class="search-bar">
                        <input type="text" placeholder="Buscar productos...">
                        <button>üîç</button>
                    </div>
                    <div class="header-icons">
                        <button class="icon-btn" id="userBtn">üë§</button>
                        <form action="{% url 'logout' %}" method="post">
                        {% csrf_token %}
                        </form>
                        <a href="#" onclick="mostrarCarrito()" class="carrito-icono">
                            üõí
                            <span id="carrito-cantidad" class="cart-count">0</span>
                        </a>
                    </div>
                    <div id="carrito-panel" style="display:none; position:fixed; right:20px; top:60px; background:white; border:1px solid #ccc; padding:10px; z-index:1000;">
                        <h3>üõí Carrito <span id="carrito-cantidad">(0)</span></h3>
                        <ul id="carrito-lista"></ul>
                        <p>Total: $<span id="total">0</span></p>
                        <button onclick="vaciarCarrito()">Vaciar carrito</button>
                        <button onclick="irACheckout()">Finalizar compra</button>
                    </div>      
                    <button class="mobile-menu-btn">‚ò∞</button>
                </div>
            </div>
            {% if request.user.is_authenticated %}
            <h1>Bienvenido, {{ request.user.username }}!</h1>
            <a href="{% url 'logout' %}">Cerrar sesi√≥n</a>
            {% else %}
            <p>No has iniciado sesi√≥n. <a href="{% url 'login' %}">Inicia sesi√≥n aqu√≠</a></p>
            {% endif %}
            <nav>
                <ul>
                    <li><a href="{% url 'inicio' %}">Inicio</a></li>
                    <li><a href="{% url 'lista_productos' %}">Herramientas</a></li>
                    <li><a href="#">Materiales</a></li>
                    <li><a href="#">Electricidad</a></li>
                    <li><a href="#">Plomer√≠a</a></li>
                    <li><a href="#">Construcci√≥n</a></li>
                    <li><a href="#">Ofertas</a></li>
                    <li><a href="{% url 'contacto' %}">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>
    {% block content %}
    <!-- Hero Banner -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Herramientas <span>profesionales</span> para todo tipo de proyectos</h1>
                <p>Encuentra todo lo que necesitas para tus proyectos de construcci√≥n, renovaci√≥n y reparaci√≥n con la mejor calidad y precios.</p>
                <div class="cta-buttons">
                    <a href="{% url 'lista_productos' %}" class="btn">Ver cat√°logo</a>
                    <a href="#" class="btn btn-outline">Ofertas especiales</a>
                </div>
            </div>
        </div>
        <div class="hero-image">
           <img src="{% static 'tienda/img/herramienta-trabajar-equipos_231794-3278.jpg' %}" alt="Herramientas profesionales">
        </div>
    </section>
    
    <!-- Categor√≠as -->
    <section class="section">
        <div class="container">
            <div class="section-header">
                <h2>Explora nuestras categor√≠as</h2>
                <p>Todo lo que necesitas para tu hogar o proyecto profesional</p>
            </div>
            
            <div class="categories-grid">
                <div class="category-card">
                    <div class="category-image">
                        <img src="{% static 'tienda/img/ramiet-1.jpg' %}" alt="Herramientas el√©ctricas">
                    </div>
                    <div class="category-overlay">
                        <div class="category-info">
                            <h3>Herramientas el√©ctricas</h3>
                            <p>Taladros, sierras, lijadoras y m√°s</p>
                            <a href="#" class="btn">Ver productos</a>
                        </div>
                    </div>
                </div>
                
                <div class="category-card">
                    <div class="category-image">
                        <img src="{% static 'tienda/img/herramienta-trabajar-equipos_231794-3278.jpg' %}" alt="Herramientas manuales">
                    </div>
                    <div class="category-overlay">
                        <div class="category-info">
                            <h3>Herramientas manuales</h3>
                            <p>Destornilladores, llaves, alicates y m√°s</p>
                            <a href="#" class="btn">Ver productos</a>
                        </div>
                    </div>
                </div>
                
                <div class="category-card">
                    <div class="category-image">
                        <img src="{% static 'tienda/img/tuberia-herramientas-plomeria-fijaciones-sobre-fondo-madera-rustica-mejoras-hogar_601748-2678.avif' %}" alt="Plomer√≠a">
                    </div>
                    <div class="category-overlay">
                        <div class="category-info">
                            <h3>Plomer√≠a</h3>
                            <p>Tuber√≠as, conexiones, grifos y m√°s</p>
                            <a href="#" class="btn">Ver productos</a>
                        </div>
                    </div>
                </div>
                
                <div class="category-card">
                    <div class="category-image">
                        <img src="{% static 'tienda/img/tipos-de-materiales-portada-casa-lima.jpg' %}" alt="Materiales de construcci√≥n">
                    </div>
                    <div class="category-overlay">
                        <div class="category-info">
                            <h3>Materiales de construcci√≥n</h3>
                            <p>Cemento, arena, ladrillos y m√°s</p>
                            <a href="#" class="btn">Ver productos</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Productos destacados -->
    <section class="section bg-light">
        <div class="container">
            <div class="section-header">
                <h2>Productos destacados</h2>
                <p>Las mejores herramientas seleccionadas para ti</p>
            </div>
            
            <div class="products-grid">
                <div class="product-card">
                    <div class="product-image">
                        <span class="product-badge badge-new">Nuevo</span>
                        <img src="/api/placeholder/250/200" alt="Taladro profesional">
                        <div class="product-actions">
                            <button class="action-btn">‚ù§Ô∏è</button>
                            <button class="action-btn">üîç</button>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Herramientas el√©ctricas</div>
                        <a href="#">
                            <h3>Taladro Inal√°mbrico Profesional 20V</h3>
                        </a>
                        <div class="product-price">
                            <span class="current-price">$129.99</span>
                            <span class="old-price">$149.99</span>
                        </div>
                        <button class="add-to-cart">üõí A√±adir al carrito</button>
                    </div>
                </div>
                
                <div class="product-card">
                    <div class="product-image">
                        <span class="product-badge badge-sale">-20%</span>
                        <img src="/api/placeholder/250/200" alt="Set de destornilladores">
                        <div class="product-actions">
                            <button class="action-btn">‚ù§Ô∏è</button>
                            <button class="action-btn">üîç</button>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Herramientas manuales</div>
                        <a href="#">
                            <h3>Set de Destornilladores Precisi√≥n 42 piezas</h3>
                        </a>
                        <div class="product-price">
                            <span class="current-price">$39.99</span>
                            <span class="old-price">$49.99</span>
                        </div>
                        <button class="add-to-cart">üõí A√±adir al carrito</button>
                    </div>
                </div>
                
                <div class="product-card">
                    <div class="product-image">
                        <img src="/api/placeholder/250/200" alt="Juego de llaves">
                        <div class="product-actions">
                            <button class="action-btn">‚ù§Ô∏è</button>
                            <button class="action-btn">üîç</button>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Herramientas manuales</div>
                        <a href="#">
                            <h3>Juego de Llaves Combinadas Profesionales 8-19mm</h3>
                        </a>
                        <div class="product-price">
                            <span class="current-price">$45.99</span>
                        </div>
                        <button class="add-to-cart">üõí A√±adir al carrito</button>
                    </div>
                </div>
                
                <div class="product-card">
                    <div class="product-image">
                        <img src="/api/placeholder/250/200" alt="Sierra circular">
                        <div class="product-actions">
                            <button class="action-btn">‚ù§Ô∏è</button>
                            <button class="action-btn">üîç</button>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Herramientas el√©ctricas</div>
                        <a href="#">
                            <h3>Sierra Circular Profesional 1500W con Gu√≠a L√°ser</h3>
                        </a>
                        <div class="product-price">
                            <span class="current-price">$119.99</span>
                            <span class="old-price">$139.99</span>
                        </div>
                        <button class="add-to-cart">üõí A√±adir al carrito</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Beneficios / Caracter√≠sticas -->
    <section class="features section">
        <div class="container">
            <div class="section-header">
                <h2>¬øPor qu√© elegirnos?</h2>
                <p>Descubre las ventajas de comprar en FerreTools</p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üöö</div>
                    <h3>Env√≠o r√°pido</h3>
                    <p>Entrega en 24-48 horas en todas las compras superiores a $50</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üíØ</div>
                    <h3>Garant√≠a de calidad</h3>
                    <p>Todas nuestras herramientas cuentan con garant√≠a por defectos de fabricaci√≥n</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üîÑ</div>
                    <h3>Devoluciones f√°ciles</h3>
                    <p>30 d√≠as para devolver tu compra si no est√°s satisfecho</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üë®‚Äçüîß</div>
                    <h3>Asesoramiento t√©cnico</h3>
                    <p>Expertos disponibles para resolver tus dudas y ayudarte a elegir</p>
                </div>
            </div>
        </div>
    </section>
    <!-- CTA Banner -->
    <section class="cta-banner">
        <div class="container">
            <div class="cta-content">
                <h2>Todo lo que necesitas para tu pr√≥ximo proyecto</h2>
                <p>Reg√≠strate ahora y obt√©n un 10% de descuento en tu primera compra</p>
                <div class="cta-buttons">
                    <a href="#" class="btn">Crear cuenta</a>
                    <a href="#" class="btn btn-outline">Ver ofertas actuales</a>
                </div>
            </div>
        </div>
    </section>
    {% endblock %}
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Sobre nosotros</h3>
                    <p>En FerreMas nos dedicamos a ofrecer las mejores herramientas y materiales para profesionales y aficionados desde 2010.</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon">üî†</a>
                        <a href="#" class="social-icon">üì∑</a>
                        <a href="#" class="social-icon">üéØ</a>
                        <a href="#" class="social-icon">üë•</a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Enlaces r√°pidos</h3>
                    <ul>
                        <li><a href="#">Inicio</a></li>
                        <li><a href="#">Cat√°logo</a></li>
                        <li><a href="#">Ofertas especiales</a></li>
                        <li><a href="#">Proyectos DIY</a></li>
                        <li><a href="#">Blog</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Categor√≠as</h3>
                    <ul>
                        <li><a href="#">Herramientas el√©ctricas</a></li>
                        <li><a href="#">Herramientas manuales</a></li>
                        <li><a href="#">Materiales de construcci√≥n</a></li>
                        <li><a href="#">Plomer√≠a</a></li>
                        <li><a href="#">Electricidad</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Cont√°ctanos</h3>
                    <div class="contact-info">
                        <div class="contact-icon">üìç</div>
                        <p>Av. Principal 1234, Ciudad</p>
                    </div>
                    <div class="contact-info">
                        <div class="contact-icon">üìû</div>
                        <p>+56 2 2123 4567</p>
                    </div>
                    <div class="contact-info">
                        <div class="contact-icon">‚úâÔ∏è</div>
                        <p>info@ferremas.cl</p>
                    </div>
                    <div class="contact-info">
                        <div class="contact-icon">‚è∞</div>
                        <p>Lun-S√°b: 8:30 - 19:00</p>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Newsletter</h3>
                    <p>Suscr√≠bete para recibir ofertas especiales y noticias sobre nuevos productos.</p>
                    <div class="newsletter">
                        <input type="email" placeholder="Tu correo electr√≥nico">
                        <button class="btn">Suscribirse</button>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 FerreMas. Todos los derechos reservados | Dise√±ado con ‚ù§Ô∏è para profesionales</p>
            </div>
        </div>
    </footer>
    <script>
        let carrito = JSON.parse(localStorage.getItem('carrito')) || []
        actualizarCarrito()
    
        function agregarAlCarrito(id, nombre, precio) {
            const productoExistente = carrito.find(item => item.id === id)
            if (productoExistente) {
                productoExistente.cantidad += 1
            } else {
                carrito.push({ id, nombre, precio, cantidad: 1 })
            }
            localStorage.setItem('carrito', JSON.stringify(carrito))
            actualizarCarrito()
        }
    
        function actualizarCarrito() {
            document.getElementById('carrito-cantidad').innerText = `(${carrito.reduce((a, b) => a + b.cantidad, 0)})`
            const lista = document.getElementById('carrito-lista')
            const totalElemento = document.getElementById('total')
            if (!lista || !totalElemento) return
    
            lista.innerHTML = ''
            let total = 0
            carrito.forEach(item => {
                const li = document.createElement('li')
                li.innerText = `${item.nombre} x${item.cantidad} - $${(item.precio * item.cantidad).toFixed(2)}`
                lista.appendChild(li)
                total += item.precio * item.cantidad
            })
            totalElemento.innerText = total.toFixed(2)
        }
    
        function mostrarCarrito() {
            const panel = document.getElementById('carrito-panel')
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none'
        }
    
        function vaciarCarrito() {
            carrito = []
            localStorage.removeItem('carrito')
            actualizarCarrito()
            document.getElementById('carrito-panel').style.display = 'none'
        }
    
        function irACheckout() {
            // Redirigir a una p√°gina de checkout (opcional)
            window.location.href = '/checkout/'  // si decides crear esta vista
        }
    </script>